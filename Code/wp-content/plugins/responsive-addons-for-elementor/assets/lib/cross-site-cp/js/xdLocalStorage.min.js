"use strict";window.XdUtils=window.XdUtils||{extend:function e(t,n){var a,i=n||{};for(a in t)t.hasOwnProperty(a)&&(i[a]=t[a]);return i}},window.reaCrossSiteCopyLocalStorage=window.reaCrossSiteCopyLocalStorage||function(){var e,t="cross-domain-local-message",n={iframeId:"rea-cs-copy-cross-domain-iframe",iframeUrl:void 0,initCallback:function(){}},a=-1,i={},r=!1,o=!0;function s(e){var a,r;try{a=JSON.parse(e.data)}catch(s){}a&&a.namespace===t&&("iframe-ready"===a.id?(o=!0,n.initCallback()):i[(r=a).id]&&(i[r.id](r),delete i[r.id]))}function l(n,r,o,s){i[++a]=s;var l={namespace:t,id:a,action:n,key:r,value:o};e.contentWindow.postMessage(JSON.stringify(l),"*")}function c(t){n=XdUtils.extend(t,n);var a=document.createElement("div");window.addEventListener?window.addEventListener("message",s,!1):window.attachEvent("onmessage",s),a.innerHTML='<iframe id="'+n.iframeId+'" src="'+n.iframeUrl+'" style="display: none;"></iframe>',document.body.appendChild(a),e=document.getElementById(n.iframeId)}function u(){return r?!!o||(console.log("You must wait for iframe ready message before using the api."),!1):(console.log("You must call reaCrossSiteCopyLocalStorage.init() before using it."),!1)}function d(){return"complete"===document.readyState}return{init:function(e){if(!e.iframeUrl)throw"You must specify iframeUrl";if(r){console.log("reaCrossSiteCopyLocalStorage was already initialized!");return}r=!0,d()?c(e):document.addEventListener?document.addEventListener("readystatechange",function(){d()&&c(e)}):document.attachEvent("readystatechange",function(){d()&&c(e)})},setItem:function(e,t,n){u()&&l("set",e,t,n)},getItem:function(e,t){u()&&l("get",e,null,t)},removeItem:function(e,t){u()&&l("remove",e,null,t)},key:function(e,t){u()&&l("key",e,null,t)},getSize:function(e){u()&&l("size",null,null,e)},getLength:function(e){u()&&l("length",null,null,e)},clear:function(e){u()&&l("clear",null,null,e)},wasInit:function(){return r}}}();